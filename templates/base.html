<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{ title }}</title>
    <link rel="icon" href="static/icon.jpg" type="image/jpg">
    <link rel="stylesheet" href="static/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
    <script defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"
        crossorigin="anonymous"></script>
    <script defer
        src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/mathtex-script-type.min.js"
        crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <button onclick="location.href='index.html'">All Articles</button>
        <button class="theme-toggle" id="theme-toggle" aria-label="switch theme">🌙/☀️</button>
    </header>
    <main>
        {% block content %}
            {{ content|safe }}
        {% endblock %}
    </main>
    <footer>Tech Entrepreneur and Researcher into AI and Markets<br><a href="https://x.com/joaoabrantis">@joaoabrantis on Twitter</a></footer>
    <script>
        (() => {
          const root  = document.documentElement;
          const btn   = document.getElementById('theme-toggle');
          const store = localStorage;
          const DARK  = 'dark';
          const LIGHT = 'light';
        
          /* 1 ▸ restore saved choice, if any */
          const saved = store.getItem('theme');
          if (saved === DARK || saved === LIGHT) {
              root.setAttribute('data-theme', saved);
          }
        
          /* helper: is the page currently dark? */
          const isDark = () => {
              const attr = root.getAttribute('data-theme');
              return attr ? attr === DARK
                          : window.matchMedia('(prefers-color-scheme: dark)').matches;
          };
        
          /* 2 ▸ flip on click */
          btn?.addEventListener('click', () => {
              const next = isDark() ? LIGHT : DARK;
              root.setAttribute('data-theme', next);
              store.setItem('theme', next);
          });
        })();
        </script>
</body>
</html>